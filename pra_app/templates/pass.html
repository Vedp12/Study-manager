{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Password Manager</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'style.css' %}">
  </head>
  <body>
    <div class="container mt-5">
      <h1 class="text-center mb-4">Password Manager</h1>
      <!-- Add New Entry -->
      <div class="card mb-4">
        <div class="card-header">
          
          <h3>Add Entry</h3>
        </div>
        <div class="card-body">
          <form action="{% url 'create' %}" method="post">
            {% csrf_token %}
            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="app-name" class="form-label"><b>App/Device Name</b></label>
                <input
                  type="text"
                  name="App_pass"
                  id="App-pass"
                  class="form-control"
                  placeholder="Youtube"
                  autocomplete="off"
                  required
                />
              </div>
              <div class="col-md-4 mb-3">
                <label for="username" class="form-label"><b>Username/Account Name</b></label>
                <input
                  type="text"
                  name="User_pass"
                  id="username"
                  class="form-control"
                  placeholder="john_D1"
                  autocomplete="off"
                  required
                />
              </div>
              <div class="col-md-4 mb-3">
                <label for="Email" class="form-label"><b>Email</b></label>
                <input
                  type="email"
                  name="email_pass"
                  id="Email"
                  class="form-control"
                  autocomplete="off"
                  placeholder="John12@gmail.com"
                  
                />
              </div>
              <div class="col-md-4 mb-3">
                <label for="password" class="form-label"><b>Password</b></label>
                <div class="password-container">
                  <input
                    type="password"
                    id="password"
                    name="password_pass"
                    class="form-control"
                    autocomplete="off"
                    placeholder="John@123"
                    required
                  />
                  <button
                    id="togglePassword"
                    aria-label="Toggle password visibility"
                    type="button"
                  >
                  <img src="{% static 'open_eye.png' %} "style="height: 30px; width: 30px;" />
                  </button>
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-primary" id="add_entry_btn">
              Add Entry<br><br>
            </button>
          </form>
        </div>
      </div><hr style="height:3px;" ><br><br><br>

      <!--! Saved Passwords Table -->
      
      <h4 class="text-center">Saved Passwords</h4><br><br>
      <form class="form-inline" action="{% url 'search' %}" method="get">
        <input type="search" placeholder="Search App name" name="Search_bar" autocomplete="off" id="Search_bar" />
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
      <!--! static data -->
      <table class="table table-bordered">
        <thead>
          <!-- <tr> -->
            
            <th>no</th>
            <th>App Name</th>
            <th>Username</th>
            <th>Email</th>
            <th>Password</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- Example Row (Dynamic Data) -->
          {% for i in pass_name %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ i.App_pass }}</td>
            <td>{{ i.User_pass }}</td>
            <td>{{ i.email_pass }}</td>
            <td>
              <input type="password" value="{{ i.password_pass }}" id="password_{{ i.id }}" readonly style="border: none; background: transparent; width: 150px;" />
              <button onclick="copyPassword('{{ i.id }}')" class="btn btn-sm btn-light">Copy</button>
            </td>
            <td>
              <!--* Update Button -->
              <button
                type="button"
                class="btn btn-warning btn-sm"
                data-bs-toggle="modal"
                data-bs-target="#updateModal-{{ i.id }}"
              >
                Update
              </button>

              <!--* Delete Button -->
              <form
                action="{% url 'delete' i.id %}"
                method="post"
                class="d-inline"
              >
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm">
                  Delete
                </button>
              </form>
            </td>
          </tr>
          <!--? Update Modal -->
          <div
            class="modal fade"
            id="updateModal-{{ i.id }}"
            tabindex="-1"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" style="margin-left: 35%;">Update Entry</h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <form action="{% url 'update' i.id %}" method="post">
                    {% csrf_token %}
                    <div class="mb-3">
                      <label for="app-name-update" class="form-label"
                        ><b> App Name</b></label
                      >
                      <input
                        type="text"
                        name="App_pass"
                        id="app-name-update"
                        class="form-control"
                        value="{{ i.App_pass }}"
                      />
                    </div>
                    <div class="mb-3">
                      <label for="username-update" class="form-label"
                        ><b>Username</b></label
                      >
                      <input
                        type="text"
                        name="User_pass"
                        id="#password"
                        class="form-control"
                        value="{{ i.User_pass }}"
                      />
                    </div>
                    <div class="mb-3">
                      <label for="email-update" class="form-label"><b>Email</b></label>
                      <input
                        type="email"
                        name="email_pass"
                        id="email-update"
                        class="form-control"
                        value="{{ i.email_pass }}"
                      />
                    </div>
                    <div class="mb-3">
                      <label for="password-update" class="form-label"
                        ><b>Password</b></label
                      >
                      <!-- <input
                        type="text"
                        name="password_pass"
                        id="password-update"
                        class="form-control"
                        value="{{ i.password_pass }}"
                      /> -->
                      <div class="password-container">
                        <input
                          type="password"
                          id="password"
                          name="password_pass"
                          class="form-control"
                          value="{{ i.password_pass }}"
                        />
                        <button
                          id="togglePassword"
                          aria-label="Toggle password visibility"
                          type="button"
                        >
                          <img src="{% static 'open_eye.png' %}" style="height: 30px; width: 30px;" />
                        </button>
                      <!--^ toggle eye feature yet to implement  -->
                    </div><br>
                    <button type="submit" class="btn btn-warning">
                      Save Changes
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <script src="{% static 'script.js'%}"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
<!-- toggleIcon.innerHTML = isPassword
          ? '<img src="close_eye1.png" alt="Hide Password" style="width: 30px; height: 40px;" />'
          : '<img src="open_eye.png" alt="Show Password" style="width: 30px; height: 40px;" />'; -->
